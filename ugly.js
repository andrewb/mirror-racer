z=new Date%256;p=f=3;o=q=g=0;s=[];Z=((i,j,k)=>c.fillStyle=i);F=((i,j,k)=>i-Math.floor(i));C=((i,j,k)=>(i-j)/(k-j));R=((i,j,k)=>F(Math.sin(i)*1e3));I=((i,j,k)=>i*i*(3-2*i));L=((i,j,k)=>(j-i)*k+i);H=((i,j,k)=>R(~~i+z+R(~~j)));N=((i,j,k)=>L(L(H(i,j),H(i+1,j),I(F(i))),L(H(i,j+1),H(i+1,j+1),I(F(i))),I(F(j))));S=((i,j,k)=>{for(_=0;_<280;_++){x=_%7;y=~~(_/7)+i;$=N(x/3.5,y/20);s.push([x,y,$>.2&&$<.8?.5:$])}});P=((i,j,k)=>{c.beginPath();c.lineTo(i,j);c.lineTo(i+.5,j+1);c.lineTo(i+1,j);c.fill()});D=((i,j,k)=>c.fillRect(i,j,1,1));a.width=a.height=600;a.style.maxWidth="100%";Z("#444");c.fillRect(0,0,600,600);c.transform(17,8.5,-17,8.5,300,300);T=((i,j,k)=>{l=(i-t)/1e3;t=i;v=e=l*50;for([i,j,k]of s){if(p==i&&~~q==j){v*=1.5-k}if(f==i&&~~g==j){e*=1.5-k}}c.translate(0,-v);q+=v;g+=e;if(o==37||o==39){if(o==37){p--;f++}if(o==39){p++;f--}p=p<0?0:p>6?6:p;f=f<0?0:f>6?6:f;o=0}if(q>m){S(m+=40);s=m%120?s:s.slice(-840)}for([i,j,k]of s){Z("#000");if(k<.2){Z(`hsl(120, 100%, ${C(k,.2,0)*50}%)`)}if(k>.8){Z(`hsl(0, 100%, ${C(k,.8,1)*50}%)`)}D(i,j)}Z("#0ff");P(f,g);Z("#fff");P(p,q);n=c.getTransform();_=f*n.a+g*n.c+n.e<-72;$=f*n.a+g*n.c+n.e>672;if(_||$){c.translate(0,q);c.rotate(-1.57);c.translate(0,-q);c.fillText(_?"LOSE":"WIN",-8,q-1)}else{requestAnimationFrame(T)}});S(m=0);T(t=0);onpointerdown=((i,j,k)=>o=i.offsetX<300?37:39);onkeydown=((i,j,k)=>o=i.which);